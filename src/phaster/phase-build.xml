<?xml version="1.0" encoding="UTF-8"?>
<project name="phaster" default="lsProps" basedir="src/phaster" description="Collection of meta task based on phing in order to make your build process easy">
 
  <import file="task-build.xml" />
 
 <target name="01:source:clone" description="Copy source and test dir to a build dir" depends="source:clone:project"  />

 <target name="02:source:score" depends="source:clone, source:score:report" description="Analyse source and test written quality" />

 <target name="03:source:resolve" depends="source:score,source:resolve:dependencies" description="Resolve source dependencies"  />

 <target name="04:source:test" depends="source:resolve, source:test:report" description="Execute unit tests" />
	
 <target name="05:source:deploy" depends="source:test, source:deploy:target" description="Deploy source code" />

 <target name="06:source:package" depends="source:deploy,source:package:doc, source:package:cli" description="Transform source code into binary format" />

 <target name="07:binary:resolve" depends="source:package,binary:resolve:dependencies" description="Current build's external dependencies installation to make the app to run" />

 <target name="08:binary:install" depends="binary:resolve,binary:install:target" description="Current build installation on specific infrastructure" />

 <target name="09:binary:test" depends="binary:install,binary:test:report" description="Execute functionnal tests" />

 <target name="10:binary:score" depends="binary:test,binary:score:report" description="Execute performance tests" /> 

 <target name="11:binary:deploy" depends="binary:score, binary:deploy:target" description="Deploy binary" />
 
 <target name="version" depends="binary:deploy" description="Build specific version of your project">
	 
	 <phingcall target="version:${build.profil}">
			<property name="origin" value="${build.name}-${build.tag}-${build.type}"/>						 
	 </phingcall>	

</target>
  
</project>
